generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x", "windows", "darwin"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Example {
  id          Int       @id @default(autoincrement())
  name        String    @unique
  description String
  createdBy   Int?
  updatedBy   Int?
  createdDate DateTime  @default(now())
  deletedDate DateTime?
  updatedDate DateTime  @updatedAt
}

model Role {
  id        Int        @id @default(autoincrement()) @map("id")
  name      String     @unique @map("name")
  createdAt DateTime   @default(now()) @map("created_at")
  updatedAt DateTime   @updatedAt @map("updated_at")
  UserRole  UserRole[]

  @@map("roles")
}

model UserRole {
  id          Int       @id @default(autoincrement()) @map("id")
  createdBy   Int       @map("created_by")
  createdDate DateTime  @default(now()) @map("created_date")
  deletedDate DateTime? @map("deleted_date")
  roleId      Int       @map("role_id")
  updatedBy   Int       @map("updated_by")
  updatedDate DateTime  @updatedAt @map("updated_date")
  userId      Int       @map("user_id")
  role        Role      @relation(fields: [roleId], references: [id])
  user        User      @relation(fields: [userId], references: [id])

  @@map("user_roles")
}

model User {
  id          Int         @id @default(autoincrement()) @map("id")
  email       String      @unique @map("email")
  password    String?     @map("password")
  createdBy   Int?        @map("created_by")
  firstNameEn String?     @map("first_name_en")
  firstNameTh String      @map("first_name_th")
  imageUrl    String?     @map("image_url")
  lastNameEn  String?     @map("last_name_en")
  lastNameTh  String      @map("last_name_th")
  nickName    String?     @map("nick_name")
  updatedBy   Int?        @map("updated_by")
  createdDate DateTime    @default(now()) @map("created_date")
  deletedDate DateTime?   @map("deleted_date")
  updatedDate DateTime    @default(now()) @updatedAt @map("updated_date")
  Admin       Admin?
  Course      Course[]
  News        News[]
  NewsMedia   NewsMedia[]
  Professor   Professor?
  Student     Student?
  UserRole    UserRole[]

  @@map("users")
}

model Admin {
  id          Int       @id @default(autoincrement()) @map("id")
  userId      Int       @unique @map("user_id")
  createdBy   Int       @map("created_by")
  createdDate DateTime  @default(now()) @map("created_date")
  deletedDate DateTime? @map("deleted_date")
  updatedBy   Int       @map("updated_by")
  updatedDate DateTime  @updatedAt @map("updated_date")
  user        User      @relation(fields: [userId], references: [id])

  @@map("admins")
}

model Type {
  id          Int        @id @default(autoincrement()) @map("id")
  name        String     @unique @map("name")
  createdDate DateTime   @default(now()) @map("created_date")
  updatedDate DateTime   @updatedAt @map("updated_date")
  ListType    ListType[]

  @@map("types")
}

model ListType {
  id          Int         @id @default(autoincrement()) @map("id")
  name        String      @unique @map("name")
  createdDate DateTime    @default(now()) @map("created_at")
  typeId      Int         @map("type_id")
  updatedDate DateTime    @updatedAt @map("updated_at")
  type        Type        @relation(fields: [typeId], references: [id])
  News        News[]
  NewsMedia   NewsMedia[]

  @@map("list_types")
}

model News {
  id          Int         @id @default(autoincrement()) @map("id")
  title       String      @map("title")
  image       String      @map("image")
  detail      String      @map("detail")
  categoryId  Int         @map("category_id")
  startDate   DateTime    @map("start_date")
  dueDate     DateTime?   @map("due_date")
  createdDate DateTime    @default(now()) @map("created_at")
  updatedDate DateTime    @default(now()) @updatedAt @map("updated_at")
  deletedDate DateTime?   @map("deleted_at")
  createdBy   Int         @map("created_by")
  updatedBy   Int         @map("updated_by")
  category    ListType    @relation(fields: [categoryId], references: [id])
  user        User        @relation(fields: [updatedBy], references: [id])
  NewsMedia   NewsMedia[]

  @@map("news")
}

model NewsMedia {
  id          Int       @id @default(autoincrement()) @map("id")
  image       String    @map("image")
  newsId      Int       @map("news_id")
  typeId      Int       @map("type_id")
  createdDate DateTime  @default(now()) @map("created_at")
  updatedDate DateTime  @default(now()) @updatedAt @map("updated_at")
  deletedDate DateTime? @map("deleted_at")
  createdBy   Int       @map("created_by")
  updatedBy   Int       @map("updated_by")
  type        ListType  @relation(fields: [typeId], references: [id])
  user        User      @relation(fields: [updatedBy], references: [id])
  news        News      @relation(fields: [newsId], references: [id])

  @@map("news_medias")
}

model TypeCourse {
  id          Int      @id @default(autoincrement()) @map("id")
  name        String   @unique @map("name")
  description String   @map("description")
  createdDate DateTime @default(now()) @map("created_date")
  updatedDate DateTime @updatedAt @map("updated_date")
  Course      Course[]

  @@map("type_courses")
}

model Course {
  id              Int          @id @default(autoincrement()) @map("id")
  courseId        String       @map("course_id")
  courseDetail    String       @map("course_detail")
  createdDate     DateTime     @default(now()) @map("created_date")
  updatedDate     DateTime     @updatedAt @map("updated_date")
  createdBy       Int          @map("created_by")
  updatedBy       Int          @map("updated_by")
  deletedDate     DateTime?    @map("deleted_date")
  courseNameEn    String       @map("course_name_en")
  courseNameTh    String       @map("course_name_th")
  credits         String       @map("credits")
  typeCourseId    Int?         @map("type_course_id")
  curriculumId    Int?         @map("curriculum_id")
  curriculum      Curriculum?  @relation(fields: [curriculumId], references: [id])
  TypeCourse      TypeCourse?  @relation(fields: [typeCourseId], references: [id])
  user            User         @relation(fields: [updatedBy], references: [id])
  PrevCourse      PrevCourse[]
  PrerequisiteFor PrevCourse[] @relation("PrevCourseRelation")

  @@map("courses")
}

model PrevCourse {
  id           Int       @id @default(autoincrement()) @map("id")
  courseId     Int       @map("course_id")
  prevCourseId Int       @map("prev_course_id")
  createdDate  DateTime  @default(now()) @map("created_date")
  updatedDate  DateTime  @updatedAt @map("updated_date")
  deletedDate  DateTime? @map("deleted_date")
  createdBy    Int       @map("created_by")
  updatedBy    Int       @map("updated_by")
  Course       Course    @relation(fields: [courseId], references: [id])
  PrevCourse   Course    @relation("PrevCourseRelation", fields: [prevCourseId], references: [id])

  @@map("prev_courses")
}

model Student {
  id                   Int       @id @default(autoincrement()) @map("id")
  userId               Int       @unique
  studentId            String    @map("student_id")
  linkedin             String?   @map("linkedin")
  facebook             String?   @map("facebook")
  instagram            String?   @map("instagram")
  github               String?   @map("github")
  yearOfFirstAdmission Int       @map("year_of_first_admission")
  yearOfCompletion     Int?      @map("year_of_completion")
  classOf              String    @map("class_of")
  createdDate          DateTime  @default(now()) @map("created_date")
  updatedDate          DateTime  @updatedAt @map("updated_date")
  deletedDate          DateTime? @map("deleted_date")
  createdBy            Int       @map("created_by")
  updatedBy            Int       @map("updated_by")
  user                 User      @relation(fields: [userId], references: [id])

  @@map("students")
}

model Curriculum {
  id          Int       @id @default(autoincrement()) @map("id")
  year        String    @map("year")
  fileUrl     String    @map("file_url")
  description String    @map("description")
  createdDate DateTime  @default(now()) @map("created_date")
  updatedDate DateTime  @updatedAt @map("updated_date")
  deletedDate DateTime? @map("deleted_date")
  createdBy   Int       @map("created_by")
  updatedBy   Int       @map("updated_by")
  imageUrl    String    @map("image_url")
  courses     Course[]

  @@map("curriculums")
}

model Professor {
  id                 Int              @id @default(autoincrement()) @map("id")
  userId             Int              @unique
  profRoom           String
  createdDate        DateTime         @default(now()) @map("created_date")
  updatedDate        DateTime         @updatedAt @map("updated_date")
  deletedDate        DateTime?        @map("deleted_date")
  createdBy          Int              @map("created_by")
  updatedBy          Int              @map("updated_by")
  academicPositionId Int
  majorPositionId    Int
  education          Education[]
  expertFields       ExpertFields[]
  academicPosition   AcademicPosition @relation(fields: [academicPositionId], references: [id])
  majorPosition      MajorPosition    @relation(fields: [majorPositionId], references: [id])
  user               User             @relation(fields: [userId], references: [id])

  @@map("professors")
}

model AcademicPosition {
  id          Int         @id @default(autoincrement()) @map("id")
  positionTh  String
  positionEn  String
  createdDate DateTime    @default(now()) @map("created_date")
  updatedDate DateTime    @updatedAt @map("updated_date")
  Professor   Professor[]

  @@map("academic_position")
}

model EducationLevel {
  id          Int         @id @default(autoincrement()) @map("id")
  createdDate DateTime    @default(now()) @map("created_date")
  updatedDate DateTime    @updatedAt @map("updated_date")
  level       String      @map("level")
  Education   Education[]

  @@map("education_levels")
}

model Education {
  id             Int            @id @default(autoincrement()) @map("id")
  levelId        Int
  professorId    Int
  education      String         @map("education")
  university     String         @map("university")
  createdDate    DateTime       @default(now()) @map("created_date")
  updatedDate    DateTime       @updatedAt @map("updated_date")
  deletedDate    DateTime?      @map("deleted_date")
  createdBy      Int            @map("created_by")
  updatedBy      Int            @map("updated_by")
  educationLevel EducationLevel @relation(fields: [levelId], references: [id])
  professor      Professor      @relation(fields: [professorId], references: [id])

  @@map("education")
}

model MajorPosition {
  id          Int         @id @default(autoincrement()) @map("id")
  createdDate DateTime    @default(now()) @map("created_date")
  updatedDate DateTime    @updatedAt @map("updated_date")
  positionEn  String      @map("position_en")
  positionTh  String      @map("position_th")
  Professor   Professor[]

  @@map("majorPosition")
}

model ExpertFields {
  id          Int       @id @default(autoincrement()) @map("id")
  professorId Int       @map("professor_id")
  createdDate DateTime  @default(now()) @map("created_date")
  updatedDate DateTime  @updatedAt @map("updated_date")
  deletedDate DateTime? @map("deleted_date")
  field       String    @map("field")
  professor   Professor @relation(fields: [professorId], references: [id])

  @@map("expert_fields")
}
